
NA값을 처리하는 방법
-> 100% 정답은 없다. 여러가지 방법 중에 가장 최선의 방법을 찾아가는 것이 중요하다.

<STEP>

1. 결측데이터의 종류

2. 결측값 유형 탐색하기(표 만들기, 결측치간 상관관계)

3. 결측 데이터의 원인 및 각각의 원인에 따른 처리 방법론

4. 결측치 처리해야 할 방법 선택(1. 합리적 접근법)

5. 결측치 처리해야할 방법 선택(2. 완전제거법)

6. 결측치 처리해야 할 방법 선택(3. 다중대체)




1. 결측데이터의 종류
ⓐ 완전 무작위 결측
어떤 변수 상에, 결측데이터가 관측되지 않은 다른 변수들과 아무 연관이 없다면
MCAR방법을 이용하여 무작위로 대규모데이터셋에서 단순 무작위 표본추출을 통해 사례를 만듬
MCAR : missing completely at random

ⓑ 무작위 결측
어떤 변수 상에 결측데이터가 관측된 다른 변수와 연관되어 있지만,
그 자체의 비관측된 값들과는 연관되어있지 아않다면 MAR을 이용해서 추출한다
MAR : missing at random

ⓒ 비 무작위 결측
소득이 적은 사람이 자기 소득을 밝히기 싫어하는 경향 => 그런 부분 반영해서 결측치를 채운다
NMAR : not missing at random


2. 결측값 유형 탐색하기(표 만만들기, 결측치간 상관관계)
표를 만들고, 결측치간의 상관관계를 체크해서 본다.

단순히 결측값이 있는 행을 제거하는 것은 좋은 방법이 아니다.
그래서 데이터 안에서 패턴을 학습하는 것이 매우 중요하다.

ⓐ 결측치가 없는 값들만 묶어서 테이블을 들고온다
-> 그래서 R에서는
library("mice")
results <- md.pattern(데이터프레임이름)

여기서, results내용을 저장해서 확인해본다.
write.csv(result, "result.csv", row.names=TRUE)

-> 여기서 결측값이 가지는 유형을 체크해본다.


데이터에는 결측치가 어떤 유형으로 얼만큼 존재하는지 확인하고 난 뒤에
결측치들간의 관계를 표로 나타내야한다.


결측값 탐색을 위해 상관관계를 이용해보자.
-> 결측치가 있는 것은 1, 아닌것은 0으로 대체해서

결측값이 있는 변수를 추출해서 이들간의 상관관계를 한번 본다
그러고 correlation matrix를 한번 체크해본다.

그럼 correlation을 다 체크해서, 서로 얼마나 상관관계가 있는지 알 수 있다.
(주의:결과값 중 NA가 있다면, NA끼리 상관관계를 구해서 그런 것일 가능성이 있따)

ⓑ 결측데이터 원인 및 각각의 원인에 따른 처리 방법론
중요한 내용 세가지: 몇퍼센트의 데이터가 결측인가, 
                   결측데이터가 특정한 며개 변수에 집중되어있나 혹은 널리 퍼져있나?
                   결측데이터는 무작위적인 것을 보이는가?
                   
5% 미만의 결측치가 있다면 다중대체법을을 이용하거나, 관측값만 삭제하는 방법이 있다.

:::: 결측의 원인을 파악 후, 이후 처리 방법?
1. 합리적 데이터 재생 접근법
2. 결측데이터 삭제를 포함하는 전통적 접근버
3. 시뮬레이션을 사용하는 현대적 접근법(다중대체)


1. 합리적 접근법
ex. 주거평수, 연봉에 양의 상관관계가 있다?
그러면 여기에 관해서 주거형태에 따라 연봉의 빈 값을 채워 넣을 수도 있다.

2. 완전 제거법
완전제거버에서는 모든 변수에서 유효한 데이터 값을 가지고 있는 관측치들만 분석에 사용. NA 제거
